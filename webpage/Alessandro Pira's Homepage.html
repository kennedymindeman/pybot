<!DOCTYPE html>
<html lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta charset="utf-8">

<style media="">
	@import url(../style2.css);
</style>

<link rel="icon" href="https://www.alessandropira.org/favicon.ico" type="image/ico">

<meta name="author" content="Alessandro Pira">
<meta name="description" content="Pybots: a programming game by Alessandro Pira"><meta name="keywords" content="pybots,game">
<title>Alessandro Pira's Homepage</title>

<style>@media print {#ghostery-tracker-tally {display:none !important}}</style></head>
<body>

<!-- Begin Menu -->

<div id="menu">

<div class="menu nobg"><a class="noroll nodec" href="https://www.alessandropira.org/index.html"><div class="logo">Alessandro Pira's Homepage</div></a></div>

<div class="menu titolo">My Games</div>

<div class="menu"><span class="link"><a href="https://www.alessandropira.org/bfw_android/get.html">Wesnoth on Android</a><span class="detach"><span class="popup">Famous strategic game <i>Battle for Wesnoth</i> ported to Android</span></span></span></div>

<div class="menu"><span class="link"><a href="https://www.alessandropira.org/viral/viral.html">Viral</a><span class="detach"><span class="popup">In this game an antibody faces an unknown virus</span></span></span></div>

<div class="menu"><span class="link"><a href="https://www.alessandropira.org/poolball/pb.html">PoolBall</a><span class="detach"><span class="popup">This game is somehow a mix between pool and soccer</span></span></span></div>

<div class="menu"><span class="link"><a href="https://www.alessandropira.org/alienwave/aw.html">Alienwave</a><span class="detach"><span class="popup">A shoot 'em up game for terminal</span></span></span></div>

<div class="menu"><span class="link"><a href="https://www.alessandropira.org/disk_war/dw.html">Disk War</a><span class="detach"><span class="popup">An X-Window game</span></span></span></div>

<div class="menu"><span class="link"><a href="https://www.alessandropira.org/inkastro/inkastro.html">Inkastro</a><span class="detach"><span class="popup">Originally a game for Nokia 3650 phones; now it can also be played online</span></span></span></div>

<div class="menu"><span class="link"><a href="https://www.alessandropira.org/yathzee/yathzee.php">Yathzee</a><span class="detach"><span class="popup">Play Yathzee online!</span></span></span></div>

<div class="menu"><span class="link"><a href="https://www.alessandropira.org/kjs/kjs.html">JSPuzzle</a><span class="detach"><span class="popup">A puzzle game playable online</span></span></span></div>

<div class="menu"><span class="link"><a href="https://www.alessandropira.org/pybots/pybots.html">Pybots</a><span class="detach"><span class="popup">Pybots is a Python programming game</span></span></span></div>

<div class="menu titolo">University projects</div>

<div class="menu"><span class="link"><a href="https://www.alessandropira.org/icaros/icaros.html">Icaros</a><span class="detach"><span class="popup">An operating system layer for MIPS</span></span></span></div>

<div class="menu"><span class="link"><a href="https://www.alessandropira.org/smartproxy/smartproxy.html">Smart Proxy</a><span class="detach"><span class="popup">A proxy with caching and prefetching</span></span></span></div>

<div class="menu"><span class="link"><a href="http://uln.sourceforge.net/">User Level Networking</a><span class="detach"><span class="popup">It's hard to explain what's that in a few words... Page hosted on Souceforge</span></span></span></div>

<div class="menu titolo">Other things...</div>

<div class="menu"><span class="link"><a href="https://www.alessandropira.org/sl4a/sl4a.html">SL4A</a><span class="detach"><span class="popup">My contributions to the SL4A project</span></span></span></div>

<div class="menu"><span class="link"><a href="https://www.alessandropira.org/xteekeyb/xtk.html">XTee Keyboard</a><span class="detach"><span class="popup">A tool for redirecting keystrokes to multiple windows (for Linux)</span></span></span></div>

<!--div class="menu"><span class="link"><a href="../sondaggio/">Toiler paper poll</a><span class="detach"><span class="popup">Italian only... sorry. Anyway it's just a joke</span></span></div-->

<div class="menu"><span class="link"><a href="https://www.alessandropira.org/virt_mouse/virt_mouse.html">Virtual Mouse Driver</a><span class="detach"><span class="popup">Use your keypad instead of a mouse... available for 2.4 Linux kernel!</span></span></span></div>

<!--div class="menu"><span class="link"><a href="../pgp_key.txt">PGP key</a><span class="detach"><span class="popup">My public pgp key</span></span></div-->

<div class="menu"><span class="link"><a href="https://www.alessandropira.org/links.html">Links</a><span class="detach"><span class="popup">Some links</span></span></span></div>


<div class="menu nobg"><span class="link"><a class="noroll" href="https://www.alessandropira.org/pybots/rules_it.html"><img src="Alessandro%20Pira's%20Homepage_files/flag-it.jpg" alt="" width="29" height="22"></a><span class="detach"><span class="popup">Italian version of this page</span></span></span></div>

<div class="menu nobg"><span class="link"><a class="noroll" href="http://www.vim.org/"><img src="Alessandro%20Pira's%20Homepage_files/vim2.jpg" alt="" width="90" height="36"></a><span class="detach"><span class="popup">My favourite editor</span></span></span></div>

</div>

<!-- End Menu -->

<div id="content" class="content">


<h1>How to play Pybots</h1>

<h2>Basic rules</h2>

Pybots will fight each other inside an arena. A single round or a tournament
can be played.<br>
<br>
A tournament is played in a set of arenas; in each one a number of rounds will
be fought. At the end of the tournament the bots who won most round wins the
tournament.<br>
<br>
An arena is a bidimensional space defined by dimensions (width, height), and
wall power, which is the strength of the hit received by pybots when they try
to move outside the arena.<br>
<br>
At the beginning of the tournament (or before the single round takes place)
pybots are loaded and a check is made to see if every pybot is correctly
implemented (i.e. it correctly defines all the hardware variables and it
does not exceed the maximum cost available for the tournament/round).
A Pybot which fails to pass this check will be disqualified and will not
compete.<br>
<br>
At the beginning of each round pybots are placed randomly in the arena.
Then a loop begins; in every "step" the engine let each pybot to define how
it is moving, how it fires shoots and which direction his scanner is looking.<br>
<br>
In the step other actions are performed by the engine: it checks if some shot
hits some pybot (each pybot is immune to his own shots), it checks if some
pybots collided with each other or tries to move outside the arena.<br>
<br>
In case of collision each pybot involved received an hit (whose strength
depends from the arena wall power or the other pybot's armour) and is
"pushed back" to the same position he occupied the previous step.<br>
<br>
When a shots hits (is inside) a pybot the shot disappears and the pybot
receives an hit whose strength is determined by the power of the shot.<br>
<br>
When a pybot receives a hit the value [strength of hit - pybot's armour],
if positive, is added to the total damage of the pybot. When the total
damage reaches the maximum damage that can be absorbed by the pybot the
pybot "dies" and is removed from the arena.<br>
<br>
When a pybot generates an exception it receives an hit of strength 1000 (it
will be of course destroyed, but if you want you can tune this value by
modifying the EXCEPTION_COST variable in vars.py)<br>

A round ends:<br>

<ul><li>after 1000 steps (this limit can be tuned by setting ROUND_DURATION in
   vars.py)</li></ul>
or
<ul><li>when there are no pybots remaining</li></ul>
or
<ul><li>when there is only one pybot remaining and no shots from other pybot are
   inside the arena</li></ul>

A pybot wins the round if it is still alive (the damage inflicted has not
reached the maximum damage level of the pybot).<br>
<br>
In case of tournament the pybot who wins more rounds is the winner of the
tournament.<br>
<br>
NB: Tournaments are the real test for a pybot: single rounds can be
determined by just luck; only in a tournament with at least 100 rounds
you can judge if a pybot is really good. Single rounds can be useful to
study and debug a pybot and try to improve it.<br>
<br>

<h2>Running Pybots</h2>

To run pybots you need python installed. Basically in the home directory
there are three runnable python scripts.<br>
<br>
The script "check_cost.py" attempts to load all available pybots and
prints out the each one's total cost.<br>
<br>
Then "single.py" and "tournament.py" can be used to run the game.
The first one can be launched with three parameters which will be used
respectively as width, height and wall strength of the arena (the wall
strength is the hit received by pybots who try to move outside the arena).
The script "tournament.py" runs a set of rounds into four different arenas;
the number of rounds that will be played in each arena can be passed as
first argument.<br>
<br>
You may want to adjust some values in the vars.py script before running
the game. There you can enable/disable the gui, adjust the verbosity level,
change the folder to look for pybots, set the maximum acceptable pybot cost,
the number of steps in a round, etc...<br>
<br>

CREATING PYBOTS

To create a pybot you have to create a .py file. The name of the file
(excluding the ".py" extension) will be the name of your bot.<br>
<br>
In this file you can import only random and math from python modules. You can
also import util which is a pybots module containing some utility functions.
If you try to import anything else your pybot will fail to load.<br>
<br>
Inside this file you have to declare a python class named "bot".
This class must define the following (integer) variabiles which will define
the hardware of the pybot:<br>

<ul>
<li><b>size</b> (5 - 15): each pybot is round-shaped, this determines the radius of
the shape; bigger pybots are easier to hit.</li>
<li><b>armour</b> (0 - 3): each time the pybot is hit this value is subtracted from
the damage</li>
<li><b>maxdamage</b> (10 - 15): the total damage that can be absorbed by the pybot
before being eliminated</li>
<li><b>maxspeed</b> (1 - 5): the maximum speed at which the pybot can move</li>
<li><b>shotpower</b> (1 - 5): the total power of shots that can be fired each round</li>
<li><b>shotspeed</b> (3 - 10): the speed of the shots</li>
<li><b>scanradius</b> (1 - 9): the width of the scanner</li>
</ul>

Besides, you may define a set_arena_data function, which (if defined) will
be called at the beginning of each fight to provide the pybot some info
about the current round parameters (i.e. the arena size, the duration of the
round, etc...).<br>
<br>
You have also to define a routine calles "act" which will be called every
step.<br>
<br>
This routine will be called with just one parameter, which will be a tuple
of (name, pos, damage, scanresult), where:<br>
<ul>
<li>name is the name of the pybot;</li>
<li>pos is the current position in the arena expressed as (x,y) tuple;</li>
<li>damage is the current total damage of the pybot;</li>
<li>scanresult is a list of (name, pos, dir, speed) tuples; each tuple
   represents a pybot that has been found with the last scan request, and
   contains its name, its position (always an (x,y) tuple) and its current
   travelling direction and speed.</li>
</ul>

The return value of this function must be a tuple of four elements, which
must be:<br>
<ul>
<li>the direction, expressed in degrees (float or int value from 0 to 360)
   to which the pybot will travel for the next step;
</li><li>the speed (integer from 0 to the maximum speed of the pybot) ant which
   the pybot will travel for the next step;
</li><li>the scanning direction for the next step (see SCANNING below);</li>
<li>a list (eventually empty) which contains one element for every shot
   fired by the pybot for the next step (see SHOOTING below).</li>
</ul>

Be careful of the length of the tuples and the type contained, because if
your routine causes an exception (this includes the applying of the return
value which actually happens outside of the act function) your pybot will
receive an hit of strength vars.EXCEPTION_COST (the default value is 1000).<br>
<br>
When you have created your pybot you can put the file with a ".py" extension
in the "bots" folder and run pybots in single round or tournament mode.<br>


<h2>Scanning</h2>

Each bot every step can scan in a direction. The scanned area etends clockwise
and counter-clockwise from that direction by a number of degrees determined
by the scanradius property of the pybot (actually 10 degrees for each
scanradius point).<br>
<br>
Each pybot which fall in the scanned area will generate an item in the fourth
parameter of the next act function call, as specified above.<br>


<h2>Shooting</h2>

To fire a shot you can add an element to the list returned by the act
function. This element must be a (direction, speed, power) tuple.<br>
<br>
Every step the shot advances in the direction and at the speed specified
by the tuple, until it exits the arena area or it hits a pybot.
In order to a shot to hit its position must be inside the pybot.<br>
A shot can never hit the pybot who fired the shot.<br>
<br>
NB: Since every step the engine performs movements for all the pybots and all
the shots and THEN checks for hits, it is possible for fast and small bots
to go past really fast shots.<br>


<h2>Basic example</h2>

This is a (really basic) example of how a pybot file should be:<br>

<pre>#!/usr/bin/env python

class bot:
	size = 9
	armour = 1
	maxdamage = 10
	maxspeed = 2
	shotpower = 4
	shotspeed = 4
	scanradius = 3

	def set_arena_data(self, data):
		self.arenaw = data['ARENA_W']
		self.arenah = data['ARENA_H']
		self.walldmg = data['ARENA_WALL_DMG']
		self.round_duration = data['ROUND_DURATION']

	def act(self, data):
		(name, pos, dmg, scanresult) = data
		return (0, 0, 0, [])
</pre>

This pybot just stants still and does nothing, but can be the skeleton of
your own pybot. More examples can be found in the "bots" folder of the archive.<br>


</div>



</body></html>